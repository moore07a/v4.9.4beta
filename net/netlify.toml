[build]
  publish = "public"

# Health check
[[redirects]]
  from = "/health"
  to = "https://v42beta-beta-v.up.railway.app/health"
  status = 200

# View logs
[[redirects]]
  from = "/view-log"
  to = "https://v42beta-beta-v.up.railway.app/view-log"
  status = 200

# Turnstile endpoints - redirect to backend
[[redirects]]
  from = "/turnstile-sitekey"
  to = "https://v42beta-beta-v.up.railway.app/turnstile-sitekey"
  status = 200

[[redirects]]
  from = "/verify-turnstile"
  to = "https://v42beta-beta-v.up.railway.app/verify-turnstile"
  status = 200

[[redirects]]
  from = "/ts-client-log"
  to = "https://v42beta-beta-v.up.railway.app/ts-client-log"
  status = 200

[[redirects]]
  from = "/decrypt-challenge-data"
  to = "https://v42beta-beta-v.up.railway.app/decrypt-challenge-data"
  status = 200

# Challenge page
[[redirects]]
  from = "/challenge"
  to = "https://v42beta-beta-v.up.railway.app/challenge"
  status = 200

# Root page from backend
[[redirects]]
  from = "/"
  to = "https://v42beta-beta-v.up.railway.app/"
  status = 200

# Redirect endpoints
[[redirects]]
  from = "/r"
  to = "https://v42beta-beta-v.up.railway.app/r"
  status = 200

[[redirects]]
  from = "/e/*"
  to = "https://v42beta-beta-v.up.railway.app/e/:splat"
  status = 200

# Catch-all - redirect everything else to backend
# Keep this rule last so all specific endpoint rules above still match first.
[[redirects]]
  from = "/*"
  to = "https://v42beta-beta-v.up.railway.app/e/:splat"
  status = 200
